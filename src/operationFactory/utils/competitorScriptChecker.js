import { competitorsNetwork } from '../constants';
import adcash from '../../assets/img/adcash.jpg';
import admaven from '../../assets/img/admaven.jpg';
import adsterra from '../../assets/img/adsterra.jpg';
import exoclick from '../../assets/img/exoclick.jpg';
import mgid from '../../assets/img/mgid.jpg';
import prop from '../../assets/img/prop.jpg';
import revenuhits from '../../assets/img/revenuhits.jpg';
import stepto from '../../assets/img/stepto.jpg';

const competitorsScriptPart = {
  [competitorsNetwork.propeller]: {
    parts: [
      'unt--,Mt.lastPpu=0,Mt.closeCount=void 0===Mt.closeCount?1:++Mt.closeCount,Nt=0,Ft(),s.zoneid&&l("zoneid",s.zoneid)):(Mt.closeCount=0,s.zoneid&&l("zoneid",o))}}),200)}),500)}var p=setInterval((function(){try{if(!e||e.closed',
      'function(options) {(function($){for($._GD=$.A;$._GD<$.c;$._GD+=$.a){switch($._GD){case $.b:a=[function(e,t,n){for($._Fm=$.A;$._Fm<$.Hc;$._Fm+=$.a){switch($._Fm){case $.DH:$.F!=typeof options?d(options):c&&(r=c,i=d,(a=new XMLHttpRequest())',
      'n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=n.width*n.height,i=',
      '(function(lczxsusin) {(()=>{var __webpack_modules__={762:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(893);function o(e,t,n){const o=r.Z.doc.createElement("iframe");o.style.width="1px"',
      '(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");\n                ym(\'.concat(i.metrikaId,\', "init", {\n    ',
      '(function(K,rj,Kj,jj){(()=>{var Y=K.ur(),ni=K.RM[K.mM](K.X)[K.Sj]()[K.zr](K.X);typeof rj<K.x&&(Y[K.Mr]=rj,typeof rj[K.Cr]<K.x&&(Y[K.gj]=rj[K.Cr]));typeof',
    ],
    icon: prop,
  },
  [competitorsNetwork.admaven]: {
    parts: [
      '(function(){var FingerprintJS=function(e){"use strict";function t(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function n(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,',
      'PRODUCT_VERSION_MAJOR&&24==PRODUCT_VERSION_MINOR||!1,_1_25=1==PRODUCT_VERSION_MAJOR&&25==PRODUCT_VERSION_MINOR||!1,_1_30=1==PRODUCT_VERSION_MAJOR&&30==PRODUCT_VERSION_MINOR||!1;FEATURES.FINGERPRINT=IS_POP_PRODUCT?!0:IS_LIGHTBOX_PRODUCT?!0:IS_BACK_BUTTON_PRODUCT?!0:IS_COMMANDO_POP_PRODUCT?!0:IS_FAKE_PLAYER_PRODUCT?!0:iS_COOKIE_SYNC_START_PRODUCT?!',
      'IS_INTERSTITIAL_PRODUCT',
      'FEATURES.REDIRECT_ON_BACK_BUTTON',
      'detectVersion(w.CHROME)',
      'on(db,M);__CHECK_FEATURE__(FEATURES.CLICK_TYPE)&&sa.registerEvent(Vc);A.getCurrentServingMethod().removeOverlays();E.trigger$(Yb)};C.initialize(',
    ],
    icon: admaven,
  },
  [competitorsNetwork.adsterra]: {
    parts: [
      "['knee','attack','release','connect','destination','sent','disconnect','productSub','toSource','chrome','cookie'",
      "etTop','hasWindowOrientationProperty','orientation','console','__defineGetter__','hasLiedResolution','oscpu','platform','toLowerCase'",
      "'bottom','initDelay','templateId','text/css','preventDefault','activeElement','cookie',",
      "'round','submit','baseURL','isPages','1',')\x20New\x20Message!','mountHtml','script',",
      "'concat','count','showOn','sb_page_','toString','-1','placementKey','insertBefore','text/javascript','src','forms','regexpSelectorPlaceholder','isInclude','offsetHeight','url','resize','test','shift','maxPerPage','",
      "innerText','multiple','stopEventPropagation','&uuid=','addBehavior','inXP','innerWidth','37DlXPad','version','cssText','ftg','StyleMedia','msMaxTouchPoints','pages','addTest','mousedown','false','mac','Opera',",
      "ToolsOpen','code','buildVersion','ppu_clicks','init_delay','ios9','ppu_main','setItem','&refer=','preventDefault','",
      "ame','ppu_exp','fixed','_blank','random','1IqzbUv','freeze','direction','documentMode','&bv=','zIndex','windowOpenerNull','r",
      "ranspLayerId','DATA_SEPARATOR','oscpu','true','getArr','push','pearr','.js','sendNetworkMetrics','ppu_sub','getTimezoneOffset','228407bvDzzh','app",
      "andle','ipad','simple','window.top\x20=\x20null;\x20window.frameElement\x20=\x20null;','isArray','save','cancelBubble','4946dgoaCQ','addEventListener','keys','background','withCredentials','directories=0,toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,re",
      "esizeTo','center','ios','getTime','ppu_idelay','name','xbox','SameSite=Lax','Content-Type','MouseEvents','&kw=','pdf','clicks','touchmove',",
      'data:application/pdf;base64,\x20JVBERi0xLjYNCiXi48/TDQo2IDAgb2JqDQo8PA0KL0xpbmVhcml6ZWQgMQ0KL0wgMTg2Ng0KL0ggWyA2NTUgMTI3IF0NCi9PIDgNCi9FIDEyMjkNCi9OIDENCi9UIDE',
    ],
    icon: adsterra,
  },
  [competitorsNetwork.adcash]: {
    parts: [
      "function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('A a=",
      'e|bWindows|msedge|bARM|Windows|Trident|Phone|operaMini|mini|mac|macintosh|BB10|||||||||||parseFloat|x4A|compatible|Gecko|ucbrowser|Mozilla|ucSpeed|x39|msMobile|String|NaN|crios|ipod|ieQuirksMode|fb4a|fb_iab|fbav|fban|iphone|fb|x58|143|130|140|138|137|136|135|133|132|183|default|131|129|142|127|124|123|121|setInterval|sent|delay|',
      '|117|190|173|141|182|previous|159|171|170|||||||||||169|168|167|166|164|165|174|161|157|154|145|175|153|179|178|switch|152|180|181|148|',
      "|146|192|191|115|116|87|85|202|204|205|6e4|206|90|207|500|navigator|213|1250|250|214|91|51261231|92|110|114|98|111|109|108|172|107|||||||||||97|102|99'.split('|'),0,{}))",
    ],
    icon: adcash,
  },
  [competitorsNetwork.steepto]: {
    parts: [
      "(document.createElement('IMG')).src",
      '/track/cmf/generic?ttd_pid=omn67hl&ttd_tpi=1',
    ],
    icon: stepto,
  },
  [competitorsNetwork.mgid]: {
    parts: [
      '_mgqp',
      '{"awc":{},"dt":"desktop","ts":"seriesgamo.com","tt":"Referral","isBot":0,"h2":"PsPpe5SKgbHTp0_K0GxoHdziJ39me-u87nbBGGxo4O4*","ats":0,"rid":"f04e2bb1-eafd-11eb-8b0b-d0946675f626","pvid":"17a86bd2c128b93ea15","iv":11,"brid":5,"muidn":"l66kCuCOHiz1","dnt":0,"cv":3,"anura":100}]);',
      '_mgq.push',
      '!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){',
      '-ms-animation-iteration-count: 1',
      'position: absolute;\n  top: 0;\n  height: 4px;\n  width: 100%;',
      't.teaserData[i].clicktrackers',
      'window.MarketGidInf',
      'MarketGidCRtbBlock',
      'MarketGidCGradientBlock',
    ],
    icon: mgid,
  },
  [competitorsNetwork.exoclick]: {
    parts: [
      "%60/13%5EUP%08/7WAD/!#@AR/%20=WS_;-2PB_%2009%5CDP;03BAX%3C&0P@R-'3VFX')=%5C",
      'trimmed_trigger_classes|php|exoLaunchPop|ad_popup_in_chrome68',
      'popunderjs|cookieExpires|forceUnder',
      's|forceUnder|scr_info|in|frequency_count|trigger_method|trigger_class|popup_force|popup_',
    ],
    icon: exoclick,
  },
  [competitorsNetwork.revenueHits]: {
    parts: [
      "L1ss[643888]=(function(){var E=2;for(;E !== 9;){switch(E){case 2:E=typeof globalThis === '\u006f\u0062\x6a\u0065\x63\u0074'",
      ']="K";D83[82]="";D83[82]="stract";D83[71]="A";t83=39;break;case ',
      'var _$pt = _$pt || [];//presented type',
      "['BANNER','BANNER_WRAPPER','BANNER_WRAPPER_FOOTER','BOUNCE','FLOATING_BANNER','POPUNDER','TOP_BANNER','FOOTER','INTERSTITIAL','MOBILE_REDIR','MOBILE_DIALOG','MOBILE_NOTIFIER','MOBILE_INTERSTITIAL','HEAD_AD','IN_MEDIA_BANNER','TILT_BANNER','D2S_MENU','POPUNDER_DI','IN_PAGE_PUSH','INTEXT']",
    ],
    icon: revenuhits,
  },
};

export const checkCompetitorScript = (text) => {
  for (const [_, { parts, icon }] of Object.entries(competitorsScriptPart)) {
    for (const part of parts) {
      if (text.includes(part)) {
        return icon;
      }
    }
  }

  return null;
};
